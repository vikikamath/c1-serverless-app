# OS specific
sudo: false
dist: trusty
addons:
  apt:
    packages:
      - awscli
language: node_js
node_js:
  - 'lts/dubnium'
cache:
  directories:
    - $HOME/.linuxbrew
    - $HOME/.nvm


branches:
  only:
  - master
  - development


before_install:
  - git clone https://github.com/Linuxbrew/brew.git $HOME/.linuxbrew
  - PATH="$HOME/.linuxbrew/bin:$PATH"
  - echo 'export PATH="$HOME/.linuxbrew/bin:$PATH"' >>~/.bash_profile
  - export MANPATH="$(brew --prefix)/share/man:$MANPATH"
  - export INFOPATH="$(brew --prefix)/share/info:$INFOPATH"
  - brew tap aws/tap
  - brew install aws-sam-cli
  - aws --version
  - sam --version

install:
  - yarn install
  - lerna bootstrap

script:
  - yarn build
  - yarn package

deploy:
  - provider: script
    script: yarn deploy
    on:
      branch: development


